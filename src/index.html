<!doctype html>
<html lang="nl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <meta
            name="description"
            content="Privacy-first gezondheids- en gewoontetracker. Al je data blijft op jouw apparaat."
        />
        <meta name="theme-color" content="#C17A5C" />

        <!-- iOS PWA meta tags -->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="Health Tracker" />

        <!-- Security Headers (will be enforced by server in production) -->
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"
        />

        <!-- PWA Icons -->
        <link rel="icon" type="image/png" href="./favicon.png" />
        <link rel="apple-touch-icon" href="./apple-touch-icon.png" />

        <title>Health Tracker - Privacy-First Gezondheidsapp</title>

        <!-- Styles are loaded via main.js in development, bundled in production -->
    </head>
    <body>
        <!-- Skip Link for Keyboard Navigation -->
        <a href="#main-content" class="skip-link">Ga naar hoofdinhoud</a>

        <!-- Offline Indicator -->
        <div id="offline-banner" class="offline-banner" role="alert">
            <span class="offline-banner-icon" aria-hidden="true">üì°</span>
            <span>Geen internetverbinding - Data wordt lokaal opgeslagen</span>
        </div>

        <!-- Pull to Refresh Indicator -->
        <div id="pull-refresh" class="pull-refresh">
            <div class="pull-refresh-icon">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                    />
                </svg>
            </div>
            <span class="pull-refresh-text">Trek naar beneden om te verversen</span>
        </div>

        <!-- PWA Update Banner -->
        <div id="update-banner" class="update-banner hidden">
            <div class="update-content">
                <span>üÜï Nieuwe versie beschikbaar!</span>
                <button id="update-button" class="btn-primary btn-small">Updaten</button>
                <button id="dismiss-update" class="btn-dismiss" aria-label="Later">√ó</button>
            </div>
        </div>

        <!-- PWA Install Banner -->
        <div id="install-banner" class="install-banner hidden">
            <div class="install-content">
                <div class="install-icon">
                    <img src="./icons/icon-96x96.png" alt="" width="48" height="48" />
                </div>
                <div class="install-text">
                    <strong>Installeer Health Tracker</strong>
                    <span>Voeg toe aan je beginscherm voor snelle toegang</span>
                </div>
                <div class="install-actions">
                    <button id="install-button" class="btn-primary btn-small">Installeren</button>
                    <button id="dismiss-install" class="btn-dismiss" aria-label="Sluiten">√ó</button>
                </div>
            </div>
        </div>

        <!-- Privacy Notice (First Time) - Inline screen, no modal -->
        <div id="privacy-notice" class="container hidden">
            <section class="privacy-screen">
                <h1>üîê Jouw Privacy Telt</h1>
                <p class="subtitle">Welkom bij Health Tracker!</p>

                <div class="privacy-card">
                    <p>Deze app is ontworpen met jouw privacy in gedachten:</p>
                    <ul class="privacy-list">
                        <li>‚úÖ Alle data blijft op JOUW apparaat (localStorage)</li>
                        <li>‚úÖ Geen cloud, geen servers, geen tracking</li>
                        <li>‚úÖ Exporteer je data wanneer je wilt</li>
                        <li>‚úÖ Verwijder alles met √©√©n klik</li>
                    </ul>
                    <p>
                        <a href="#" id="view-security" class="link"
                            >Lees onze Beveiligings- en Privacyverklaring</a
                        >
                    </p>
                </div>

                <button id="accept-privacy" class="btn-primary btn-large">
                    Begrepen! Laten we starten
                </button>
            </section>
        </div>

        <!-- Main App Container -->
        <div id="app" class="container">
            <!-- Compact Header with Score -->
            <header class="app-header-compact">
                <div class="header-left">
                    <h1>Health Tracker</h1>
                    <div class="date-selector">
                        <button id="prev-date" class="date-nav-btn" aria-label="Vorige dag">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <input
                            type="date"
                            id="date-picker"
                            class="date-picker-input"
                            aria-label="Selecteer datum"
                        />
                        <button id="next-date" class="date-nav-btn" aria-label="Volgende dag">
                            <svg
                                width="16"
                                height="16"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                            >
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                        <button
                            id="back-to-today"
                            class="today-btn hidden"
                            aria-label="Terug naar vandaag"
                        >
                            Vandaag
                        </button>
                    </div>
                    <p class="date" id="current-date"></p>
                    <span id="date-indicator" class="date-indicator hidden">Eerdere datum</span>
                </div>
                <div class="header-score" role="img" aria-label="Gezondheidscore">
                    <!-- Mini circular progress -->
                    <svg class="score-mini" viewBox="0 0 60 60" aria-hidden="true">
                        <title id="health-score-title">Gezondheidscore</title>
                        <desc id="health-score-desc">Je huidige gezondheidscore is 0%</desc>
                        <circle
                            cx="30"
                            cy="30"
                            r="24"
                            fill="none"
                            stroke="#E8E3DD"
                            stroke-width="6"
                        />
                        <circle
                            id="progress-circle"
                            cx="30"
                            cy="30"
                            r="24"
                            fill="none"
                            stroke="#C17A5C"
                            stroke-width="6"
                            stroke-linecap="round"
                            stroke-dasharray="150.8"
                            stroke-dashoffset="150.8"
                            transform="rotate(-90 30 30)"
                        />
                        <text
                            x="30"
                            y="30"
                            text-anchor="middle"
                            dominant-baseline="middle"
                            font-size="14"
                            font-weight="700"
                            fill="#2C2822"
                            id="svg-score-value"
                        >
                            0%
                        </text>
                    </svg>
                </div>
            </header>

            <main id="main-content">
                <!-- Score message (compact) -->
                <div class="score-message-compact" id="score-message">Start met tracken!</div>

                <!-- Quick Stats - Inline Row (hidden by default, shown after input) -->
                <div class="quick-stats-inline hidden" id="quick-stats-row">
                    <div class="stat-inline">
                        <span class="stat-icon" aria-hidden="true">üò¥</span>
                        <span class="stat-value" id="stat-sleep">-</span>
                    </div>
                    <div class="stat-inline">
                        <span class="stat-icon" aria-hidden="true">üíß</span>
                        <span class="stat-value" id="stat-water">-</span>
                    </div>
                    <div class="stat-inline">
                        <span class="stat-icon" aria-hidden="true">üö∂</span>
                        <span class="stat-value" id="stat-walked">-</span>
                    </div>
                    <div class="stat-inline">
                        <span class="stat-icon" aria-hidden="true">üíä</span>
                        <span class="stat-value" id="stat-pain">-</span>
                    </div>
                </div>

                <!-- Hidden elements for arc progress compatibility -->
                <svg class="hidden" aria-hidden="true">
                    <path id="stat-sleep-progress" stroke-dashoffset="125.66" />
                    <path id="stat-water-progress" stroke-dashoffset="125.66" />
                    <path id="stat-walked-progress" stroke-dashoffset="125.66" />
                    <path id="stat-pain-progress" stroke-dashoffset="125.66" />
                </svg>
            </main>

            <!-- Tracking Form (Time-based sections) -->
            <section id="tracker-view" class="view active">
                <h2 id="time-greeting" class="sr-only">Tracking van Vandaag</h2>

                <!-- Fallback Banner (when morning missed) -->
                <div id="fallback-banner" class="fallback-banner hidden">
                    <p>Je hebt de <span id="missed-window-label">ochtend</span> gemist</p>
                    <button id="fill-all-btn" class="btn-secondary btn-small">
                        Alles invullen
                    </button>
                </div>

                <!-- MORNING SECTION (06:00 - 10:00) -->
                <div id="morning-section" class="tracking-card time-section" data-window="morning">
                    <h3><span aria-hidden="true">üåÖ</span> Goedemorgen</h3>

                    <div class="form-group">
                        <label for="sleep-score" class="label-with-value">
                            <span>Hoe heb je geslapen?</span>
                            <output id="sleep-output">7</output><span class="value-max">/10</span>
                        </label>
                        <input
                            type="range"
                            id="sleep-score"
                            min="1"
                            max="10"
                            value="7"
                            class="slider"
                            aria-describedby="sleep-hint"
                            aria-valuemin="1"
                            aria-valuemax="10"
                            aria-valuenow="7"
                        />
                        <span id="sleep-hint" class="sr-only"
                            >Kies een waarde van 1 (slecht) tot 10 (uitstekend)</span
                        >
                    </div>

                    <div class="form-group">
                        <label for="back-pain" class="label-with-value">
                            <span>Rugpijn niveau</span>
                            <output id="pain-output">0</output><span class="value-max">/10</span>
                        </label>
                        <input
                            type="range"
                            id="back-pain"
                            min="0"
                            max="10"
                            value="0"
                            class="slider"
                            aria-describedby="pain-hint"
                            aria-valuemin="0"
                            aria-valuemax="10"
                            aria-valuenow="0"
                        />
                        <span id="pain-hint" class="sr-only"
                            >Kies een waarde van 0 (geen pijn) tot 10 (ernstige pijn)</span
                        >
                    </div>

                    <div class="form-group">
                        <label id="dreamed-label">Heb je gedroomd vannacht?</label>
                        <div class="option-pills" role="radiogroup" aria-labelledby="dreamed-label">
                            <button
                                type="button"
                                class="pill-option"
                                data-value="yes"
                                role="radio"
                                aria-checked="false"
                            >
                                Ja
                            </button>
                            <button
                                type="button"
                                class="pill-option"
                                data-value="no"
                                role="radio"
                                aria-checked="false"
                            >
                                Nee
                            </button>
                            <button
                                type="button"
                                class="pill-option"
                                data-value="unknown"
                                role="radio"
                                aria-checked="false"
                            >
                                Weet niet
                            </button>
                        </div>
                        <input type="hidden" id="dreamed-value" value="" />
                    </div>
                </div>

                <!-- WEIGHT SECTION (05:00 - 12:00, separate from morning) -->
                <div id="weight-section" class="tracking-card time-section" data-window="weight">
                    <h3><span aria-hidden="true">‚öñÔ∏è</span> Gewicht</h3>

                    <div class="form-group">
                        <button
                            type="button"
                            id="weight-picker-trigger"
                            class="picker-trigger"
                            aria-describedby="weight-hint"
                            aria-haspopup="dialog"
                        >
                            <span id="weight-display" class="picker-value">-- kg</span>
                            <span class="picker-arrow">‚Ä∫</span>
                        </button>
                        <input type="hidden" id="weight" value="" />
                        <span id="weight-hint" class="form-hint"
                            >Optioneel - weeg jezelf elke ochtend</span
                        >
                    </div>
                </div>

                <!-- WATER SECTION (Always visible) -->
                <div
                    id="water-section"
                    class="tracking-card water-card time-section"
                    data-window="always"
                >
                    <h3><span aria-hidden="true">üíß</span> Water</h3>

                    <div class="water-display" role="status" aria-live="polite">
                        <div class="water-count" id="water-count">0</div>
                        <span class="water-label">glazen</span>
                    </div>

                    <button
                        type="button"
                        id="water-add"
                        class="btn-water-add"
                        aria-label="Voeg glas water toe"
                    >
                        + Glas water
                    </button>

                    <div
                        class="water-progress"
                        role="progressbar"
                        aria-valuemin="0"
                        aria-valuemax="8"
                        aria-valuenow="0"
                    >
                        <div class="water-progress-fill" id="water-progress-fill"></div>
                    </div>
                    <p class="water-goal">Doel: 8 glazen</p>

                    <!-- Hidden input for compatibility -->
                    <input type="hidden" id="water-intake" value="0" />
                </div>

                <!-- EVENING SECTION (after 20:00) -->
                <div id="evening-section" class="tracking-card time-section" data-window="evening">
                    <h3><span aria-hidden="true">üåô</span> Goedenavond</h3>

                    <!-- Walked -->
                    <div class="form-group checkbox">
                        <input type="checkbox" id="walked" />
                        <label for="walked">Ik heb vandaag gelopen</label>
                    </div>

                    <!-- Reading -->
                    <div class="form-group checkbox">
                        <input type="checkbox" id="reading" />
                        <label for="reading">Ik heb vandaag gelezen</label>
                    </div>

                    <!-- Sugar Portions -->
                    <div class="form-group">
                        <label for="sugar-portions">Suiker (porties)</label>
                        <div class="counter-control">
                            <button
                                type="button"
                                class="btn-counter btn-minus"
                                data-target="sugar-portions"
                                aria-label="Minder suiker"
                            >
                                ‚àí
                            </button>
                            <input
                                type="number"
                                id="sugar-portions"
                                min="0"
                                max="20"
                                value="0"
                                readonly
                                aria-label="Aantal suiker porties"
                            />
                            <button
                                type="button"
                                class="btn-counter btn-plus"
                                data-target="sugar-portions"
                                aria-label="Meer suiker"
                            >
                                +
                            </button>
                        </div>
                    </div>

                    <!-- Caffeine Count -->
                    <div class="form-group">
                        <label for="caffeine-count">Cafe√Øne (kopjes)</label>
                        <div class="counter-control">
                            <button
                                type="button"
                                class="btn-counter btn-minus"
                                data-target="caffeine-count"
                                aria-label="Minder cafe√Øne"
                            >
                                ‚àí
                            </button>
                            <input
                                type="number"
                                id="caffeine-count"
                                min="0"
                                max="20"
                                value="0"
                                readonly
                                aria-label="Aantal kopjes cafe√Øne"
                            />
                            <button
                                type="button"
                                class="btn-counter btn-plus"
                                data-target="caffeine-count"
                                aria-label="Meer cafe√Øne"
                            >
                                +
                            </button>
                        </div>
                    </div>

                    <!-- Alcohol Count -->
                    <div class="form-group">
                        <label for="alcohol-count">Alcohol (glazen)</label>
                        <div class="counter-control">
                            <button
                                type="button"
                                class="btn-counter btn-minus"
                                data-target="alcohol-count"
                                aria-label="Minder alcohol"
                            >
                                ‚àí
                            </button>
                            <input
                                type="number"
                                id="alcohol-count"
                                min="0"
                                max="20"
                                value="0"
                                readonly
                                aria-label="Aantal glazen alcohol"
                            />
                            <button
                                type="button"
                                class="btn-counter btn-plus"
                                data-target="alcohol-count"
                                aria-label="Meer alcohol"
                            >
                                +
                            </button>
                        </div>
                    </div>

                    <!-- Energy Level (5 levels) -->
                    <div class="form-group">
                        <label id="energy-label">Hoeveel energie had je vandaag?</label>
                        <div class="energy-picker" role="radiogroup" aria-labelledby="energy-label">
                            <button
                                type="button"
                                class="energy-option"
                                data-energy="1"
                                role="radio"
                                aria-checked="false"
                                aria-label="Uitgeput"
                            >
                                üò´
                            </button>
                            <button
                                type="button"
                                class="energy-option"
                                data-energy="2"
                                role="radio"
                                aria-checked="false"
                                aria-label="Moe"
                            >
                                üò¥
                            </button>
                            <button
                                type="button"
                                class="energy-option"
                                data-energy="3"
                                role="radio"
                                aria-checked="false"
                                aria-label="Normaal"
                            >
                                üòê
                            </button>
                            <button
                                type="button"
                                class="energy-option"
                                data-energy="4"
                                role="radio"
                                aria-checked="false"
                                aria-label="Energiek"
                            >
                                üòä
                            </button>
                            <button
                                type="button"
                                class="energy-option"
                                data-energy="5"
                                role="radio"
                                aria-checked="false"
                                aria-label="Vol energie"
                            >
                                üí™
                            </button>
                        </div>
                        <input type="hidden" id="energy-value" value="" />
                    </div>

                    <!-- Mood (5 Smileys) -->
                    <div class="form-group">
                        <label id="mood-label">Hoe was je dag?</label>
                        <div class="mood-picker" role="radiogroup" aria-labelledby="mood-label">
                            <button
                                type="button"
                                class="mood-option"
                                data-mood="1"
                                role="radio"
                                aria-checked="false"
                                aria-label="Zeer slecht"
                            >
                                üò¢
                            </button>
                            <button
                                type="button"
                                class="mood-option"
                                data-mood="2"
                                role="radio"
                                aria-checked="false"
                                aria-label="Slecht"
                            >
                                üòï
                            </button>
                            <button
                                type="button"
                                class="mood-option"
                                data-mood="3"
                                role="radio"
                                aria-checked="false"
                                aria-label="Neutraal"
                            >
                                üòê
                            </button>
                            <button
                                type="button"
                                class="mood-option"
                                data-mood="4"
                                role="radio"
                                aria-checked="false"
                                aria-label="Goed"
                            >
                                üôÇ
                            </button>
                            <button
                                type="button"
                                class="mood-option"
                                data-mood="5"
                                role="radio"
                                aria-checked="false"
                                aria-label="Zeer goed"
                            >
                                üòÑ
                            </button>
                        </div>
                        <input type="hidden" id="mood-value" value="" />
                    </div>

                    <!-- Custom Habits (dynamically rendered) -->
                    <div id="custom-habits-tracker" class="custom-habits-tracker hidden">
                        <div class="form-group">
                            <label>Mijn gewoonten</label>
                            <div id="custom-habits-checkboxes" class="habits-checkboxes"></div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="save-data" class="btn-primary btn-large">üíæ Bewaar</button>
                    <button type="button" id="edit-today-btn" class="btn-secondary hidden">
                        ‚úèÔ∏è Bewerk ingevulde secties
                    </button>
                </div>
            </section>

            <!-- Stats View -->
            <section id="stats-view" class="view">
                <h2>Statistieken</h2>

                <!-- Period Selector -->
                <div class="period-selector" role="tablist" aria-label="Selecteer periode">
                    <button
                        class="period-btn active"
                        data-period="7"
                        role="tab"
                        aria-selected="true"
                    >
                        7d
                    </button>
                    <button class="period-btn" data-period="14" role="tab" aria-selected="false">
                        14d
                    </button>
                    <button class="period-btn" data-period="30" role="tab" aria-selected="false">
                        30d
                    </button>
                    <button class="period-btn" data-period="90" role="tab" aria-selected="false">
                        90d
                    </button>
                    <button class="period-btn" data-period="-1" role="tab" aria-selected="false">
                        Alles
                    </button>
                </div>

                <!-- Summary Cards -->
                <div class="stats-summary">
                    <div class="summary-card">
                        <div class="summary-icon" aria-hidden="true">üíØ</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-avg-score">--</span>
                            <span class="summary-label">Gem. Score</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon" aria-hidden="true">üìÖ</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-total-days">--</span>
                            <span class="summary-label">Dagen</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon" aria-hidden="true">üö∂</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-walk-pct">--</span>
                            <span class="summary-label">Gelopen</span>
                        </div>
                    </div>
                </div>

                <!-- Health Score Chart -->
                <div class="stats-card">
                    <h3>Health Score Trend</h3>
                    <div class="chart-container" id="health-score-chart">
                        <p class="no-data">Geen data beschikbaar</p>
                    </div>
                </div>

                <!-- Weight Chart -->
                <div class="stats-card" id="weight-stats-card">
                    <h3>Gewicht</h3>
                    <div class="weight-summary">
                        <span class="weight-current" id="weight-current">-- kg</span>
                        <span class="weight-change" id="weight-change"></span>
                    </div>
                    <div class="chart-container" id="weight-chart">
                        <p class="no-data">Geen gewichtsdata beschikbaar</p>
                    </div>
                </div>

                <!-- Activity Stats -->
                <div class="stats-card">
                    <h3>Activiteit & Welzijn</h3>
                    <div class="metric-bars">
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span><span aria-hidden="true">üò¥</span> Slaap</span>
                                <span class="metric-bar-value" id="stats-sleep-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill"
                                    id="stats-sleep-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span><span aria-hidden="true">üíß</span> Water</span>
                                <span class="metric-bar-value" id="stats-water-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill water"
                                    id="stats-water-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span><span aria-hidden="true">üíä</span> Rugpijn</span>
                                <span class="metric-bar-value" id="stats-pain-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill pain"
                                    id="stats-pain-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Energy & Mood Stats -->
                <div class="stats-card">
                    <h3>Energie & Stemming</h3>
                    <div id="energy-mood-stats">
                        <p class="no-data">Nog geen energie/stemming geregistreerd</p>
                    </div>
                </div>

                <!-- Clean Streaks (Sugar & Alcohol) -->
                <div class="stats-card">
                    <h3>Clean Streaks</h3>
                    <div class="consumption-stats">
                        <div class="consumption-item">
                            <div class="consumption-icon" aria-hidden="true">üç¨</div>
                            <div class="consumption-data">
                                <div class="consumption-label">Suiker</div>
                                <div class="consumption-bar-track">
                                    <div
                                        class="consumption-bar-fill sugar"
                                        id="stats-sugar-bar"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div class="consumption-detail" id="stats-sugar-detail">
                                    -- dagen
                                </div>
                            </div>
                        </div>
                        <div class="consumption-item">
                            <div class="consumption-icon" aria-hidden="true">üç∑</div>
                            <div class="consumption-data">
                                <div class="consumption-label">Alcohol</div>
                                <div class="consumption-bar-track">
                                    <div
                                        class="consumption-bar-fill alcohol"
                                        id="stats-alcohol-bar"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div class="consumption-detail" id="stats-alcohol-detail">
                                    -- dagen
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Caffeine (neutral tracking, separate from clean streaks) -->
                <div class="stats-card">
                    <h3>Cafe√Øne</h3>
                    <div class="caffeine-stats">
                        <div class="stat-row">
                            <span class="stat-label">‚òï Dagen met cafe√Øne</span>
                            <span class="stat-value" id="stats-caffeine-detail">--</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- History View (placeholder) -->
            <section id="history-view" class="view">
                <h2>Geschiedenis</h2>
                <p>Binnenkort beschikbaar...</p>
            </section>

            <!-- Settings View -->
            <section id="settings-view" class="view">
                <h2>Instellingen</h2>

                <!-- Custom Habits Section -->
                <div class="settings-card">
                    <h3>Custom Habits</h3>
                    <p class="settings-desc">Voeg je eigen gewoonten toe om bij te houden.</p>
                    <div id="custom-habits-settings"></div>
                </div>

                <!-- Tracking Fields Section -->
                <div class="settings-card">
                    <h3>Tracking velden</h3>
                    <p class="settings-desc">Kies welke velden je wilt bijhouden.</p>
                    <div class="toggle-list" id="field-toggles">
                        <label class="toggle-item">
                            <span class="toggle-label">üò¥ Slaapscore</span>
                            <input type="checkbox" id="toggle-sleep" checked data-field="sleep" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üíä Rugpijn</span>
                            <input type="checkbox" id="toggle-pain" checked data-field="pain" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">‚öñÔ∏è Gewicht</span>
                            <input type="checkbox" id="toggle-weight" checked data-field="weight" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üí≠ Gedroomd</span>
                            <input
                                type="checkbox"
                                id="toggle-dreamed"
                                checked
                                data-field="dreamed"
                            />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üíß Water</span>
                            <input type="checkbox" id="toggle-water" checked data-field="water" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üö∂ Gelopen</span>
                            <input type="checkbox" id="toggle-walked" checked data-field="walked" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üìñ Lezen</span>
                            <input
                                type="checkbox"
                                id="toggle-reading"
                                checked
                                data-field="reading"
                            />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üç¨ Suiker</span>
                            <input type="checkbox" id="toggle-sugar" checked data-field="sugar" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">‚òï Cafe√Øne</span>
                            <input
                                type="checkbox"
                                id="toggle-caffeine"
                                checked
                                data-field="caffeine"
                            />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üç∑ Alcohol</span>
                            <input
                                type="checkbox"
                                id="toggle-alcohol"
                                checked
                                data-field="alcohol"
                            />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">‚ö° Energie</span>
                            <input type="checkbox" id="toggle-energy" checked data-field="energy" />
                            <span class="toggle-switch"></span>
                        </label>
                        <label class="toggle-item">
                            <span class="toggle-label">üòä Stemming</span>
                            <input type="checkbox" id="toggle-mood" checked data-field="mood" />
                            <span class="toggle-switch"></span>
                        </label>
                    </div>
                </div>

                <!-- Export Section -->
                <div class="settings-card">
                    <h3>Exporteren</h3>
                    <p class="settings-desc">Download je data als backup of voor analyse.</p>
                    <div class="settings-buttons">
                        <button id="export-csv" class="btn-secondary">CSV Exporteren</button>
                        <button id="export-json" class="btn-secondary">JSON Exporteren</button>
                    </div>
                </div>

                <!-- Import Section -->
                <div class="settings-card">
                    <h3>Importeren</h3>
                    <p class="settings-desc">Herstel data van een backup of importeer van CSV.</p>
                    <div class="settings-buttons">
                        <label class="btn-secondary file-input-label">
                            CSV Importeren
                            <input type="file" id="import-csv" accept=".csv" hidden />
                        </label>
                        <label class="btn-secondary file-input-label">
                            JSON Importeren
                            <input type="file" id="import-json" accept=".json" hidden />
                        </label>
                    </div>
                    <p
                        class="settings-note"
                        id="import-status"
                        role="status"
                        aria-live="polite"
                    ></p>
                </div>

                <!-- Demo Data (hidden when user has data) -->
                <div class="settings-card" id="demo-data-card">
                    <h3>Demo Data</h3>
                    <p class="settings-desc">Genereer voorbeelddata om de app te testen.</p>
                    <div class="settings-buttons">
                        <button id="generate-demo" class="btn-secondary">
                            7 Dagen Demo Genereren
                        </button>
                        <button id="generate-demo-30" class="btn-secondary">
                            30 Dagen Demo Genereren
                        </button>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="settings-card">
                    <h3>Data Beheer</h3>
                    <p class="settings-desc">Beheer je opgeslagen data.</p>
                    <div class="data-stats" id="data-stats">
                        <span>Laden...</span>
                    </div>
                    <div class="settings-buttons">
                        <button id="cleanup-old" class="btn-secondary">
                            Data Ouder dan 90 Dagen Verwijderen
                        </button>
                        <button id="delete-all-data" class="btn-danger">
                            Alle Data Verwijderen
                        </button>
                    </div>
                </div>

                <!-- Privacy -->
                <div class="settings-card">
                    <h3>Privacy</h3>
                    <p class="settings-desc">Al je data blijft lokaal op dit apparaat.</p>
                    <a href="./SECURITY.md" target="_blank" class="link">
                        Bekijk Beveiligings- en Privacyverklaring
                    </a>
                </div>

                <!-- About / Version -->
                <div class="settings-card settings-card-muted">
                    <h3>Over Health Tracker</h3>
                    <div class="version-info">
                        <div class="version-row">
                            <span class="version-label">Versie</span>
                            <span class="version-value" id="app-version">0.1.0</span>
                        </div>
                        <div class="version-row">
                            <span class="version-label">Build</span>
                            <span class="version-value" id="app-build-date">--</span>
                        </div>
                    </div>
                    <div class="settings-buttons" style="margin-top: var(--spacing-md)">
                        <button id="check-update" class="btn-secondary">
                            <span class="btn-text">Controleer op updates</span>
                            <span class="btn-spinner hidden"></span>
                        </button>
                    </div>
                    <p
                        class="update-status"
                        id="update-status"
                        role="status"
                        aria-live="polite"
                    ></p>
                </div>
            </section>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="tracker-view" aria-label="Tracken">
                <svg
                    class="nav-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    aria-hidden="true"
                >
                    <path d="M12 20h9"></path>
                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                </svg>
                <span class="nav-label">Tracken</span>
            </button>
            <button class="nav-item" data-view="stats-view" aria-label="Statistieken">
                <svg
                    class="nav-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    aria-hidden="true"
                >
                    <line x1="18" y1="20" x2="18" y2="10"></line>
                    <line x1="12" y1="20" x2="12" y2="4"></line>
                    <line x1="6" y1="20" x2="6" y2="14"></line>
                </svg>
                <span class="nav-label">Stats</span>
            </button>
            <button class="nav-item" data-view="history-view" aria-label="Geschiedenis">
                <svg
                    class="nav-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    aria-hidden="true"
                >
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span class="nav-label">Historie</span>
            </button>
            <button class="nav-item" data-view="settings-view" aria-label="Instellingen">
                <svg
                    class="nav-icon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    aria-hidden="true"
                >
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                    ></path>
                </svg>
                <span class="nav-label">Opties</span>
            </button>
        </nav>

        <!-- Weight Wheel Picker -->
        <div
            id="weight-picker-overlay"
            class="picker-overlay hidden"
            role="dialog"
            aria-modal="true"
            aria-label="Gewicht kiezen"
        >
            <div class="picker-container">
                <div class="picker-header">
                    <button type="button" id="weight-picker-cancel" class="picker-btn">
                        Annuleren
                    </button>
                    <span class="picker-title">Gewicht</span>
                    <button
                        type="button"
                        id="weight-picker-confirm"
                        class="picker-btn picker-btn-primary"
                    >
                        Klaar
                    </button>
                </div>
                <div class="picker-wheels">
                    <div class="picker-wheel" id="weight-kg-wheel">
                        <div class="picker-wheel-inner" id="weight-kg-inner"></div>
                    </div>
                    <div class="picker-separator">,</div>
                    <div class="picker-wheel" id="weight-decimal-wheel">
                        <div class="picker-wheel-inner" id="weight-decimal-inner"></div>
                    </div>
                    <div class="picker-unit">kg</div>
                    <div class="picker-highlight"></div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications Container -->
        <div
            id="toast-container"
            class="toast-container"
            aria-live="polite"
            aria-atomic="true"
        ></div>

        <!-- Main Application Script (ES Module) -->
        <script type="module" src="./main.js"></script>
    </body>
</html>
