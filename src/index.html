<!doctype html>
<html lang="nl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
        <meta
            name="description"
            content="Privacy-first gezondheids- en gewoontetracker. Al je data blijft op jouw apparaat."
        />
        <meta name="theme-color" content="#C17A5C" />

        <!-- iOS PWA meta tags -->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="Health Tracker" />

        <!-- Security Headers (will be enforced by server in production) -->
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"
        />

        <!-- PWA Icons -->
        <link rel="icon" type="image/png" href="./favicon.png" />
        <link rel="apple-touch-icon" href="./apple-touch-icon.png" />

        <title>Health Tracker - Privacy-First Gezondheidsapp</title>

        <!-- Styles are loaded via main.js in development, bundled in production -->
    </head>
    <body>
        <!-- PWA Install Banner -->
        <div id="install-banner" class="install-banner hidden">
            <div class="install-content">
                <div class="install-icon">
                    <img src="./icons/icon-96x96.png" alt="" width="48" height="48" />
                </div>
                <div class="install-text">
                    <strong>Installeer Health Tracker</strong>
                    <span>Voeg toe aan je beginscherm voor snelle toegang</span>
                </div>
                <div class="install-actions">
                    <button id="install-button" class="btn-primary btn-small">Installeren</button>
                    <button id="dismiss-install" class="btn-dismiss" aria-label="Sluiten">√ó</button>
                </div>
            </div>
        </div>

        <!-- Privacy Notice (First Time) -->
        <div id="privacy-notice" class="privacy-notice hidden">
            <div class="privacy-content">
                <h2>üîê Jouw Privacy Telt</h2>
                <p><strong>Welkom bij Health Tracker!</strong></p>
                <p>Deze app is ontworpen met jouw privacy in gedachten:</p>
                <ul>
                    <li>‚úÖ Alle data blijft op JOUW apparaat (localStorage)</li>
                    <li>‚úÖ Geen cloud, geen servers, geen tracking</li>
                    <li>‚úÖ Exporteer je data wanneer je wilt</li>
                    <li>‚úÖ Verwijder alles met √©√©n klik</li>
                </ul>
                <p>
                    <small
                        >Lees onze
                        <a href="#" id="view-security">Beveiligings- en Privacyverklaring</a></small
                    >
                </p>
                <button id="accept-privacy" class="btn-primary">Begrepen! Laten we starten</button>
            </div>
        </div>

        <!-- Main App Container -->
        <div id="app" class="container">
            <!-- Header -->
            <header class="app-header">
                <h1>Health Tracker</h1>
                <p class="subtitle">Jouw gezondheid, jouw data, jouw controle</p>
            </header>

            <!-- Health Score Visualization -->
            <section class="health-score-section">
                <div class="score-container">
                    <!-- Circular Progress SVG - Clean & Minimal -->
                    <svg
                        class="health-circle"
                        viewBox="0 0 200 200"
                        role="img"
                        aria-labelledby="health-score-title health-score-desc"
                    >
                        <title id="health-score-title">Gezondheidscore</title>
                        <desc id="health-score-desc">Je huidige gezondheidscore is 0%</desc>
                        <!-- Background circle -->
                        <circle
                            cx="100"
                            cy="100"
                            r="80"
                            fill="none"
                            stroke="#E8E3DD"
                            stroke-width="16"
                        />
                        <!-- Progress circle -->
                        <circle
                            id="progress-circle"
                            cx="100"
                            cy="100"
                            r="80"
                            fill="none"
                            stroke="#C17A5C"
                            stroke-width="16"
                            stroke-linecap="round"
                            stroke-dasharray="502.65"
                            stroke-dashoffset="502.65"
                            transform="rotate(-90 100 100)"
                        />
                        <!-- Percentage Text -->
                        <text
                            x="100"
                            y="100"
                            text-anchor="middle"
                            dominant-baseline="middle"
                            font-size="48"
                            font-weight="700"
                            fill="#2C2822"
                            id="svg-score-value"
                            aria-hidden="true"
                        >
                            0%
                        </text>
                    </svg>
                </div>

                <div class="score-message" id="score-message">Start met tracken!</div>

                <!-- Quick Stats - 2x2 Grid -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-label">üò¥ Slaap</div>
                        <!-- Partial circular progress (decorative) -->
                        <svg class="stat-progress" viewBox="0 0 100 60" aria-hidden="true">
                            <!-- Background arc -->
                            <path
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#E8E3DD"
                                stroke-width="8"
                                stroke-linecap="round"
                            />
                            <!-- Progress arc -->
                            <path
                                id="stat-sleep-progress"
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#C17A5C"
                                stroke-width="8"
                                stroke-linecap="round"
                                stroke-dasharray="125.66"
                                stroke-dashoffset="125.66"
                            />
                        </svg>
                        <div class="stat-value" id="stat-sleep">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">üíß Water</div>
                        <!-- Partial circular progress (decorative) -->
                        <svg class="stat-progress" viewBox="0 0 100 60" aria-hidden="true">
                            <!-- Background arc -->
                            <path
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#E8E3DD"
                                stroke-width="8"
                                stroke-linecap="round"
                            />
                            <!-- Progress arc -->
                            <path
                                id="stat-water-progress"
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#8B9E7D"
                                stroke-width="8"
                                stroke-linecap="round"
                                stroke-dasharray="125.66"
                                stroke-dashoffset="125.66"
                            />
                        </svg>
                        <div class="stat-value" id="stat-water">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">üö∂ Lopen</div>
                        <!-- Partial circular progress (decorative) -->
                        <svg class="stat-progress" viewBox="0 0 100 60" aria-hidden="true">
                            <!-- Background arc -->
                            <path
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#E8E3DD"
                                stroke-width="8"
                                stroke-linecap="round"
                            />
                            <!-- Progress arc -->
                            <path
                                id="stat-walked-progress"
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#C17A5C"
                                stroke-width="8"
                                stroke-linecap="round"
                                stroke-dasharray="125.66"
                                stroke-dashoffset="125.66"
                            />
                        </svg>
                        <div class="stat-value" id="stat-walked">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">üíä Rugpijn</div>
                        <!-- Partial circular progress (decorative) -->
                        <svg class="stat-progress" viewBox="0 0 100 60" aria-hidden="true">
                            <!-- Background arc -->
                            <path
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#E8E3DD"
                                stroke-width="8"
                                stroke-linecap="round"
                            />
                            <!-- Progress arc -->
                            <path
                                id="stat-pain-progress"
                                d="M 10 50 A 40 40 0 0 1 90 50"
                                fill="none"
                                stroke="#D89A82"
                                stroke-width="8"
                                stroke-linecap="round"
                                stroke-dasharray="125.66"
                                stroke-dashoffset="125.66"
                            />
                        </svg>
                        <div class="stat-value" id="stat-pain">-</div>
                    </div>
                </div>
            </section>

            <!-- Tracking Form (will be in separate view) -->
            <section id="tracker-view" class="view active">
                <h2>Tracking van Vandaag</h2>
                <p class="date" id="current-date"></p>

                <!-- Sleep & Wellbeing -->
                <div class="tracking-card">
                    <h3>üò¥ Slaap & Welzijn</h3>

                    <div class="form-group">
                        <label for="sleep-score">Slaapcijfer</label>
                        <input
                            type="range"
                            id="sleep-score"
                            min="1"
                            max="10"
                            value="7"
                            class="slider"
                        />
                        <output id="sleep-output">7</output>
                    </div>

                    <div class="form-group">
                        <label for="back-pain">Rugpijn Niveau</label>
                        <input
                            type="range"
                            id="back-pain"
                            min="0"
                            max="10"
                            value="0"
                            class="slider"
                        />
                        <output id="pain-output">0</output>
                    </div>

                    <div class="form-group checkbox">
                        <input type="checkbox" id="dreamed" />
                        <label for="dreamed">Ik heb afgelopen nacht gedroomd</label>
                    </div>
                </div>

                <!-- Hydration & Activity -->
                <div class="tracking-card">
                    <h3>üíß Hydratatie & Activiteit</h3>

                    <div class="form-group">
                        <label for="water-intake">Water (glazen)</label>

                        <!-- Visual glass indicators with screen reader support -->
                        <div
                            class="water-glasses"
                            id="water-glasses"
                            role="status"
                            aria-live="polite"
                        >
                            <!-- Screen reader announcement (updated dynamically) -->
                            <span class="sr-only" id="water-status" aria-atomic="true"
                                >Water: 0 van 8 glazen</span
                            >
                            <!-- Visual indicators (decorative for screen readers) -->
                            <div class="glass-icon" data-glass="1" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="2" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="3" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="4" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="5" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="6" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="7" aria-hidden="true">üíß</div>
                            <div class="glass-icon" data-glass="8" aria-hidden="true">üíß</div>
                        </div>

                        <div class="water-control">
                            <button
                                type="button"
                                class="btn-control btn-minus"
                                id="water-minus"
                                title="Verwijder een glas"
                            >
                                ‚àí
                            </button>
                            <input
                                type="number"
                                id="water-intake"
                                min="0"
                                max="20"
                                value="0"
                                readonly
                            />
                            <button
                                type="button"
                                class="btn-control btn-plus"
                                id="water-add"
                                title="Voeg een glas toe"
                            >
                                +
                            </button>
                        </div>
                    </div>

                    <div class="form-group checkbox">
                        <input type="checkbox" id="walked" />
                        <label for="walked">Ik heb vandaag gelopen</label>
                    </div>
                </div>

                <!-- Consumption -->
                <div class="tracking-card">
                    <h3>üç¨ Consumptie</h3>

                    <div class="form-group checkbox">
                        <input type="checkbox" id="sugar-consumed" />
                        <label for="sugar-consumed">Suiker geconsumeerd</label>
                    </div>

                    <div class="form-group checkbox">
                        <input type="checkbox" id="alcohol-consumed" />
                        <label for="alcohol-consumed">Alcohol geconsumeerd</label>
                    </div>

                    <div class="form-group" id="alcohol-type-group" style="display: none">
                        <label>Type drankje</label>
                        <div class="alcohol-pills">
                            <button
                                type="button"
                                class="pill-button"
                                data-type="bier"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">üç∫</span>
                                <span class="pill-label">Bier</span>
                            </button>
                            <button
                                type="button"
                                class="pill-button"
                                data-type="wijn"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">üç∑</span>
                                <span class="pill-label">Wijn</span>
                            </button>
                            <button
                                type="button"
                                class="pill-button"
                                data-type="whisky"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">ü•É</span>
                                <span class="pill-label">Whisky</span>
                            </button>
                            <button
                                type="button"
                                class="pill-button"
                                data-type="port"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">üç∑</span>
                                <span class="pill-label">Port</span>
                            </button>
                            <button
                                type="button"
                                class="pill-button"
                                data-type="vermouth"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">üç∏</span>
                                <span class="pill-label">Vermouth</span>
                            </button>
                            <button
                                type="button"
                                class="pill-button"
                                data-type="gin"
                                aria-pressed="false"
                            >
                                <span class="pill-icon">üç∏</span>
                                <span class="pill-label">Gin</span>
                            </button>
                        </div>
                        <input type="hidden" id="alcohol-type" value="" />
                    </div>

                    <div class="form-group checkbox">
                        <input type="checkbox" id="caffeine-consumed" />
                        <label for="caffeine-consumed">Cafe√Øne geconsumeerd</label>
                    </div>
                </div>

                <!-- Save Button -->
                <button id="save-data" class="btn-primary btn-large">
                    üíæ Bewaar Data van Vandaag
                </button>
            </section>

            <!-- Stats View -->
            <section id="stats-view" class="view">
                <h2>Statistieken</h2>

                <!-- Period Selector -->
                <div class="period-selector" role="tablist" aria-label="Selecteer periode">
                    <button
                        class="period-btn active"
                        data-period="7"
                        role="tab"
                        aria-selected="true"
                    >
                        7d
                    </button>
                    <button class="period-btn" data-period="14" role="tab" aria-selected="false">
                        14d
                    </button>
                    <button class="period-btn" data-period="30" role="tab" aria-selected="false">
                        30d
                    </button>
                    <button class="period-btn" data-period="90" role="tab" aria-selected="false">
                        90d
                    </button>
                    <button class="period-btn" data-period="-1" role="tab" aria-selected="false">
                        Alles
                    </button>
                </div>

                <!-- Summary Cards -->
                <div class="stats-summary">
                    <div class="summary-card">
                        <div class="summary-icon">üíØ</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-avg-score">--</span>
                            <span class="summary-label">Gem. Score</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üìÖ</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-total-days">--</span>
                            <span class="summary-label">Dagen</span>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon">üö∂</div>
                        <div class="summary-data">
                            <span class="summary-value" id="stats-walk-pct">--</span>
                            <span class="summary-label">Gelopen</span>
                        </div>
                    </div>
                </div>

                <!-- Health Score Chart -->
                <div class="stats-card">
                    <h3>Health Score Trend</h3>
                    <div class="chart-container" id="health-score-chart">
                        <p class="no-data">Geen data beschikbaar</p>
                    </div>
                </div>

                <!-- Weight Chart -->
                <div class="stats-card" id="weight-stats-card">
                    <h3>Gewicht</h3>
                    <div class="weight-summary">
                        <span class="weight-current" id="weight-current">-- kg</span>
                        <span class="weight-change" id="weight-change"></span>
                    </div>
                    <div class="chart-container" id="weight-chart">
                        <p class="no-data">Geen gewichtsdata beschikbaar</p>
                    </div>
                </div>

                <!-- Activity Stats -->
                <div class="stats-card">
                    <h3>Activiteit & Welzijn</h3>
                    <div class="metric-bars">
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span>üò¥ Slaap</span>
                                <span class="metric-bar-value" id="stats-sleep-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill"
                                    id="stats-sleep-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span>üíß Water</span>
                                <span class="metric-bar-value" id="stats-water-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill water"
                                    id="stats-water-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                        <div class="metric-bar-item">
                            <div class="metric-bar-header">
                                <span>üíä Rugpijn</span>
                                <span class="metric-bar-value" id="stats-pain-avg">--</span>
                            </div>
                            <div class="metric-bar-track">
                                <div
                                    class="metric-bar-fill pain"
                                    id="stats-pain-bar"
                                    style="width: 0%"
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Consumption Stats -->
                <div class="stats-card">
                    <h3>Consumptie</h3>
                    <div class="consumption-stats">
                        <div class="consumption-item">
                            <div class="consumption-icon">üç¨</div>
                            <div class="consumption-data">
                                <div class="consumption-label">Suiker</div>
                                <div class="consumption-bar-track">
                                    <div
                                        class="consumption-bar-fill sugar"
                                        id="stats-sugar-bar"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div class="consumption-detail" id="stats-sugar-detail">
                                    -- dagen
                                </div>
                            </div>
                        </div>
                        <div class="consumption-item">
                            <div class="consumption-icon">üç∑</div>
                            <div class="consumption-data">
                                <div class="consumption-label">Alcohol</div>
                                <div class="consumption-bar-track">
                                    <div
                                        class="consumption-bar-fill alcohol"
                                        id="stats-alcohol-bar"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div class="consumption-detail" id="stats-alcohol-detail">
                                    -- dagen
                                </div>
                            </div>
                        </div>
                        <div class="consumption-item">
                            <div class="consumption-icon">‚òï</div>
                            <div class="consumption-data">
                                <div class="consumption-label">Cafe√Øne</div>
                                <div class="consumption-bar-track">
                                    <div
                                        class="consumption-bar-fill caffeine"
                                        id="stats-caffeine-bar"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div class="consumption-detail" id="stats-caffeine-detail">
                                    -- dagen
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- History View (placeholder) -->
            <section id="history-view" class="view">
                <h2>üìÖ Geschiedenis</h2>
                <p>Binnenkort beschikbaar...</p>
            </section>

            <!-- Settings View -->
            <section id="settings-view" class="view">
                <h2>Instellingen</h2>

                <!-- Export Section -->
                <div class="settings-card">
                    <h3>Exporteren</h3>
                    <p class="settings-desc">Download je data als backup of voor analyse.</p>
                    <div class="settings-buttons">
                        <button id="export-csv" class="btn-secondary">CSV Exporteren</button>
                        <button id="export-json" class="btn-secondary">JSON Exporteren</button>
                    </div>
                </div>

                <!-- Import Section -->
                <div class="settings-card">
                    <h3>Importeren</h3>
                    <p class="settings-desc">Herstel data van een backup of importeer van CSV.</p>
                    <div class="settings-buttons">
                        <label class="btn-secondary file-input-label">
                            CSV Importeren
                            <input type="file" id="import-csv" accept=".csv" hidden />
                        </label>
                        <label class="btn-secondary file-input-label">
                            JSON Importeren
                            <input type="file" id="import-json" accept=".json" hidden />
                        </label>
                    </div>
                    <p class="settings-note" id="import-status"></p>
                </div>

                <!-- Demo Data -->
                <div class="settings-card">
                    <h3>Demo Data</h3>
                    <p class="settings-desc">Genereer voorbeelddata om de app te testen.</p>
                    <div class="settings-buttons">
                        <button id="generate-demo" class="btn-secondary">
                            7 Dagen Demo Genereren
                        </button>
                        <button id="generate-demo-30" class="btn-secondary">
                            30 Dagen Demo Genereren
                        </button>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="settings-card">
                    <h3>Data Beheer</h3>
                    <p class="settings-desc">Beheer je opgeslagen data.</p>
                    <div class="data-stats" id="data-stats">
                        <span>Laden...</span>
                    </div>
                    <div class="settings-buttons">
                        <button id="cleanup-old" class="btn-secondary">
                            Data Ouder dan 90 Dagen Verwijderen
                        </button>
                        <button id="delete-all-data" class="btn-danger">
                            Alle Data Verwijderen
                        </button>
                    </div>
                </div>

                <!-- Privacy -->
                <div class="settings-card">
                    <h3>Privacy</h3>
                    <p class="settings-desc">Al je data blijft lokaal op dit apparaat.</p>
                    <a href="./SECURITY.md" target="_blank" class="link">
                        Bekijk Beveiligings- en Privacyverklaring
                    </a>
                </div>
            </section>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="tracker-view">
                <span class="nav-icon">üìù</span>
                <span class="nav-label">Tracken</span>
            </button>
            <button class="nav-item" data-view="stats-view">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">Stats</span>
            </button>
            <button class="nav-item" data-view="history-view">
                <span class="nav-icon">üìÖ</span>
                <span class="nav-label">Historie</span>
            </button>
            <button class="nav-item" data-view="settings-view">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Opties</span>
            </button>
        </nav>

        <!-- Main Application Script (ES Module) -->
        <script type="module" src="./main.js"></script>
    </body>
</html>
